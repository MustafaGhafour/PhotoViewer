"use strict";
function __export(m) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}
Object.defineProperty(exports, "__esModule", { value: true });
var application = require("tns-core-modules/application");
var photoviewer_common_1 = require("./photoviewer.common");
__export(require("./photoviewer.common"));
var PhotoViewer = (function () {
    function PhotoViewer() {
        var _this = this;
        this.onActivityResult = function (args) {
            if (args.requestCode === PhotoViewer.CLOSE_PHOTO_REQUEST) {
                _this._currentResolve();
                _this._currentResolve = undefined;
                application.android.off("activityResult", _this.onActivityResult);
            }
        };
    }
    PhotoViewer.prototype.showGallery = function (imagesArray, options) {
        var _this = this;
        var photosArray = new java.util.ArrayList();
        imagesArray.forEach(function (imgUrl) {
            photosArray.add(imgUrl);
        });
        var startIndex = options.startIndex || 0;
        var paletteType = options.android.paletteType || null;
        var showAlbum = options.android.showAlbum || false;
        var intent;
        application.android.on("activityResult", this.onActivityResult);
        return new Promise(function (resolve) {
            _this._currentResolve = resolve;
            if (!showAlbum) {
                intent = new android.content.Intent(application.android.foregroundActivity, com.etiennelawlor.imagegallery.library.activities.FullScreenImageGalleryActivity.class);
            }
            else {
                intent = new android.content.Intent(application.android.foregroundActivity, com.etiennelawlor.imagegallery.library.activities.ImageGalleryActivity.class);
            }
            intent.putStringArrayListExtra("images", photosArray);
            intent.putExtra("position", startIndex);
            if (paletteType) {
                intent.putExtra("palette_color_type", getPaletteType(paletteType));
            }
            application.android.foregroundActivity.startActivityForResult(intent, PhotoViewer.CLOSE_PHOTO_REQUEST);
        });
    };
    PhotoViewer.CLOSE_PHOTO_REQUEST = 9191;
    return PhotoViewer;
}());
exports.PhotoViewer = PhotoViewer;
function getPaletteType(paletteType) {
    switch (paletteType) {
        case photoviewer_common_1.PaletteType.Vibrant:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.VIBRANT;
        case photoviewer_common_1.PaletteType.LightVibrant:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.LIGHT_VIBRANT;
        case photoviewer_common_1.PaletteType.DarkVibrant:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.DARK_VIBRANT;
        case photoviewer_common_1.PaletteType.Muted:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.MUTED;
        case photoviewer_common_1.PaletteType.LightMuted:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.LIGHT_MUTED;
        case photoviewer_common_1.PaletteType.DarkMuted:
            return com.etiennelawlor.imagegallery.library.enums.PaletteColorType.DARK_MUTED;
        default:
            return null;
    }
}
//# sourceMappingURL=photoviewer.android.js.map